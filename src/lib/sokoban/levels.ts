import type { LevelData } from './game';

/**
 * XSB 字符对照：
 * # (墙), . (目标), $ (箱子), * (箱在点), @ (人), + (人在点), 空格 (地)
 */
function parseXSB(name: string, xsb: string): LevelData {
    // 移除字符串开头和结尾的空行，但保留每行内部的空格
    const lines = xsb.replace(/^\n+|\n+$/g, '').split('\n');
    // 找出最长的一行，确保地图是矩形
    const maxWidth = Math.max(...lines.map(l => l.length));

    const charMap: Record<string, number> = {
        '#': 1, ' ': 0, '.': 2, '$': 3, '*': 4, '@': 5, '+': 6
    };

    const map = lines.map(line => {
        const row = line.padEnd(maxWidth, ' ').split('').map(char => charMap[char] ?? 0);
        return row;
    });

    return { name, map };
}

export const levels: LevelData[] = [
    parseXSB("第1关", "####\n# .#\n#  ###\n#*@  #\n#  $ #\n#  ###\n####"),
    parseXSB("第2关", "###########\n#    #    #\n#  $ . $  #\n#  @ # .  #\n#    #    #\n###########"),
    parseXSB("第3关", "  ####\n###  ####\n# @$  . #\n#  $$.  #\n####  ###\n   ####"),
    parseXSB("第4关", "####  #####\n#  ####   #\n# $.  $ . #\n# @#  #   #\n############"),
    parseXSB("第5关", "######\n#    #\n# .. #\n# $$ #\n# @  #\n######"),
    parseXSB("第6关", "##########\n#  .  .  #\n#  $  $  #\n#    @   #\n##########"),
    parseXSB("第7关", " #####\n #   #\n##$#$##\n# .@. #\n#  #  #\n#######"),
    parseXSB("第8关", "#######\n#     #\n# $.$ #\n# .@. #\n# $.$ #\n#     #\n#######"),
    parseXSB("第9关", "  #####\n###   #\n# @$$ #\n#  .. #\n#######"),
    parseXSB("第10关", "#######\n#  .  #\n# $#$ #\n# .@. #\n#######"),
    parseXSB("第11关", "  ####\n###  #\n#  $ #\n# @#.#\n#  $ #\n###  #\n  ####"),
    parseXSB("第12关", "#######\n#     #\n# .$. #\n# $@$ #\n# .$. #\n#     #\n#######"),
    parseXSB("第13关", " #####\n #   #\n##$#$##\n# .@. #\n#######"),
    parseXSB("第14关", "  ####\n###  #\n#  $ #\n# .#@#\n#  $ #\n###  #\n  ####"),
    parseXSB("第15关", "#######\n#     #\n# . . #\n# $ $ #\n#  @  #\n#######"),
    parseXSB("第16关", "#######\n# @   #\n# $ $ #\n# . . #\n#######"),
    parseXSB("第17关", " #####\n # . #\n##$#$##\n# .@. #\n#######"),
    parseXSB("第18关", "#######\n#     #\n# $ $ #\n# . . #\n#  @  #\n#######"),
    parseXSB("第19关", " #####\n # . #\n##$#$##\n#  @  #\n#######"),
    parseXSB("第20关", "#######\n#  .  #\n# $#$ #\n#  @  #\n#######"),
    parseXSB("第21关", "#######\n#     #\n# $ $ #\n# .@. #\n#######"),
    parseXSB("第22关", "#######\n#  .  #\n#  $  #\n#  @  #\n#######"),
    parseXSB("第23关", "#####\n#   #\n# @ #\n# $ #\n# . #\n#####"),
    parseXSB("第24关", "#####\n# . #\n# $ #\n# @ #\n#   #\n#####"),
    parseXSB("第25关", "#####\n#   #\n# $ #\n# . #\n# @ #\n#####"),
    parseXSB("第26关", "#######\n#     #\n# $.$ #\n#  @  #\n#######"),
    parseXSB("第27关", "  #####\n###   #\n#  $. #\n# @   #\n#######"),
    parseXSB("get28关", "#######\n#     #\n#  $  #\n# .@  #\n#######"),
    parseXSB("第29关", "#######\n#     #\n#  .  #\n#  $  #\n#  @  #\n#######"),
    parseXSB("第30关", "#####\n# . #\n# $ #\n# @ #\n#####"),
    parseXSB("第31关", "#######\n#  .  #\n#  $  #\n# @   #\n#######"),
    parseXSB("第32关", "#######\n#     #\n# $   #\n# .   #\n# @   #\n#######"),
    parseXSB("第33关", "#######\n#     #\n# .   #\n# $   #\n# @   #\n#######"),
    parseXSB("第34关", "#######\n#     #\n# @   #\n# $   #\n# .   #\n#######"),
    parseXSB("第35关", "#######\n#     #\n# @   #\n# .   #\n# $   #\n#######"),
    parseXSB("第36关", "#######\n#     #\n# $   #\n# @   #\n# .   #\n#######"),
    parseXSB("第37关", "#######\n#     #\n# .   #\n# @   #\n# $   #\n#######"),
    parseXSB("第38关", "  #####\n###   #\n#  $. #\n#  @  #\n#######"),
    parseXSB("第39关", "#######\n#     #\n#  $  #\n#  .  #\n#  @  #\n#######"),
    parseXSB("第40关", "#######\n#     #\n#  .  #\n#  $  #\n#  @  #\n#######"),
    parseXSB("第41关", "#######\n#     #\n#  @  #\n#  $  #\n#  .  #\n#######"),
    parseXSB("第42关", "#######\n#     #\n#  @  #\n#  .  #\n#  $  #\n#######"),
    parseXSB("第43关", "#######\n#     #\n#  $  #\n#  @  #\n#  .  #\n#######"),
    parseXSB("第44关", "#######\n#     #\n#  .  #\n#  @  #\n#  $  #\n#######"),
    parseXSB("第45关", "#######\n#     #\n# $ . #\n#  @  #\n#######"),
    parseXSB("第46关", "#######\n#     #\n# . $ #\n#  @  #\n#######"),
    parseXSB("第47关", "#######\n#     #\n# @ . #\n#  $  #\n#######"),
    parseXSB("第48关", "#######\n#     #\n# @ $ #\n#  .  #\n#######"),
    parseXSB("第49关", "#######\n#     #\n# $ @ #\n#  .  #\n#######"),
    parseXSB("第50关", "#######\n#     #\n# . @ #\n#  $  #\n#######")
];

export const totalLevels: number = levels.length;